<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ration Card</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 800px;
            position: relative;
        }

        .modal-header {
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .modal-header h2 {
            color: #4a0e78;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .modal-header p {
            color: #666;
            font-size: 1rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #4a0e78;
            box-shadow: 0 0 0 3px rgba(74, 14, 120, 0.1);
        }

        .button-container {
            position: fixed;
           top: 400px ;
            right: 30%;
            display: flex;
            gap: 12px;
            z-index: 900;
        }

        .action-button {
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .primary-button {
            background-color: #4a0e78;
            color: white;
        }

        .secondary-button {
            background-color: #f8f9fa;
            color: #4a0e78;
            border: 1px solid #4a0e78;
        }

        .action-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .primary-button:hover {
            background-color: #3a0b5e;
        }

        .secondary-button:hover {
            background-color: #e9ecef;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 5px;
            line-height: 1;
        }

        .modal-close:hover {
            color: #4a0e78;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            gap: 10px;
        }

        .card {
            flex: 1;

            width: 350px;
            min-height: 250px;
            background: white;
            border: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: #FDB813;
            padding: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-logo {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
        }

        .header-logo img {
            width: 100%;
            height: auto;
        }

        .title {
            color: #800080;
            font-size: 11px;
            font-weight: bold;
            text-align: center;
            flex: 1;
        }

        .card-content {
            padding: 10px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            
        }

        .profile-section {
            display: flex;
            gap: 10px;
        }

        .profile-photo {
            width: 50px;
            height: 60px;
        }

        .info-section {
            flex: 1;
            font-size: 11px;

        }

        .info-line {
            margin: 5px 0;
           
            font-size: 11px;
        }

        .card-number-section {
            display: flex;
            justify-content: right;
    align-items: center;
    margin-top: 1px;
    gap: 150px;
}
        }

        .card-number {
            color: #800080;
          line-height:0.2;
          font-size:7px;
            
        }

        .qr-code {
            width: 40px;
            height: 40px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1px;
            font-size: 9px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 4px;
            text-align: left;
        }

        th {
            background-color: #FDB813;
        }

        .footer {
            background-color: #FDB813;
            padding: 5px;
            text-align: center;
            font-weight: bold;
            font-size: 10px;
        }

        .hindi-text {
            text-align: center;
            padding: 5px;
            background-color: #FDB813;
            font-weight: bold;
            font-size: 10px;
        }

        .print-date {
            font-size: 10px;
            color: #666;
        }



  .Patrata {
            width: 40px; /* Set width to 40px */
            height: 40px; /* Set height to 40px */
            display: flex; /* Use flexbox for centering */
            align-items: center; /* Center vertically */
            justify-content: center; /* Center horizontally */
            border: 1px solid #000; /* Optional: add a border for visibility */
            font-size: 16px; /* Adjust font size as needed */
            background-color: #FDB813; /* Optional: background color */
            font-size: 11px;
            border-radius: 50%;
            font-weight: bold;
        }
    




         @media print {
            body {
                background-color: white;
            }
            .button-container, .modal-overlay {
                display: none !important;
            }
        }

        /* Loading spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #4a0e78;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 1100;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>
</head>
<body>
     <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner"></div>

    <!-- Buttons -->
    <div class="button-container">
        <button onclick="showForm()" class="action-button primary-button" id="newCardBtn">
            <span>‚ûï</span> New Card
        </button>
        <button onclick="window.print()" class="action-button secondary-button">
            <span>üñ®Ô∏è</span> Print
        </button>
        <button onclick="saveAsPDF()" class="action-button secondary-button">
            <span>üìë</span> Save PDF
        </button>
    </div>

    <!-- Modal Form -->
    <div class="modal-overlay" id="form-container">
        <div class="modal-content">
            <button class="modal-close" onclick="hideForm()">√ó</button>
            <div class="modal-header">
                <h2>Create New Ration Card</h2>
                <p>Paste your ration card data below to generate the preview</p>
            </div>
            <div class="form-group">
                <textarea id="rationData" placeholder="Paste the ration card data here..."></textarea>
            </div>
        </div>
    </div>
    <!--card container -->
    <div class="container">
        <div class="card">
            <div class="header">
                <div class="header-logo">
                    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2ou6XbQBPXf_f1Rl07D3uFDCX-3MnhHLh-W5ZQ4oxD8N5okfdQn1DeTgFZvtMVAclkuL4fReSvshOPueUueI2LMj2lbHAQm1q6rMel3flP-7z7uxkVGn3TzGJdL9F7Ss0tTtcu19UqQdELi1Irkf_t987QnOLw5tYO_Du8AK2fyuDe9YPadK0Jx8LRw/s1600-rw/NAFA%20Logo.png">
                </div>

                <div class="title">National Food Security Portal</div>

                <div class="header-logo">
                    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2ou6XbQBPXf_f1Rl07D3uFDCX-3MnhHLh-W5ZQ4oxD8N5okfdQn1DeTgFZvtMVAclkuL4fReSvshOPueUueI2LMj2lbHAQm1q6rMel3flP-7z7uxkVGn3TzGJdL9F7Ss0tTtcu19UqQdELi1Irkf_t987QnOLw5tYO_Du8AK2fyuDe9YPadK0Jx8LRw/s1600-rw/NAFA%20Logo.png" alt="Government Logo">
                </div>

            </div>

            <div class="card-content">
                <div class="title" style="color: #800080;">Ration Card</div>

                <div class="profile-section">

                    <div class="">
                        <img class="profile-photo" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEionHLvpyADBDZcLEeW_PIJBpIO94PlSjcm6LYY1-F61uY9bY-U5pJCjRdKZbc59Ztgk4RM7ejyfVHvr2lZz8ldiaUG1j8B5itYl5XF82dpEJsDMphUfsQlCAIPMHDG_JAfUNDvuqk78029Wa3TsW_Ft07LJxhQ5iITa_r90taoN173xKzU1k9qJNCE8A/s1600-rw/Nafa%20photo%20logo.png" alt="Profile photo">
                        <div class="print-date">Print Date: <br><span id="currentDate"></span></div>
                    </div>

                    <div class="info-section">
            
        
            <p><strong>Scheme Name:</strong> <span id="scheme"></span></p> 
            <p><strong>Head of Family:</strong> <span id="headOfFamily"></span></p>
            <p><strong>Address:</strong> <span id="address"></span></p>
            <p><strong>Allowed for ONORC:</strong> <span id="onorccheck"></span></p>
       <div style="font-size:11px;"> Ration Card Number:  </div>

                    </div>
         <div class="Patrata">  0kg</div>
                </div>
                <div class="card-number-section">

               
                    <div class="card-number" >   <h3 id="rationCardNo" style="color: #800080;">   </h3></div>
                    <img class="qr-code" src="data:image/png;base64,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" alt="QR Code for https://nfsa.gov.in/public/frmPublicGetMyRCDetails.aspx" >
                   
                </div>
            </div>

            <div class="hindi-text">"‡§Æ‡•á‡§∞‡§æ ‡§∞‡§æ‡§∂‡§® - ‡§Æ‡•á‡§∞‡§æ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞"</div>

        </div>
          <!-- Second Card (Back Side) -->

        <div class="card">
            <div class="header">
                <div class="header-logo">
                    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2ou6XbQBPXf_f1Rl07D3uFDCX-3MnhHLh-W5ZQ4oxD8N5okfdQn1DeTgFZvtMVAclkuL4fReSvshOPueUueI2LMj2lbHAQm1q6rMel3flP-7z7uxkVGn3TzGJdL9F7Ss0tTtcu19UqQdELi1Irkf_t987QnOLw5tYO_Du8AK2fyuDe9YPadK0Jx8LRw/s1600-rw/NAFA%20Logo.png">
                </div>

                <div class="title">National Food Security Portal</div>

                <div class="header-logo">
                    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2ou6XbQBPXf_f1Rl07D3uFDCX-3MnhHLh-W5ZQ4oxD8N5okfdQn1DeTgFZvtMVAclkuL4fReSvshOPueUueI2LMj2lbHAQm1q6rMel3flP-7z7uxkVGn3TzGJdL9F7Ss0tTtcu19UqQdELi1Irkf_t987QnOLw5tYO_Du8AK2fyuDe9YPadK0Jx8LRw/s1600-rw/NAFA%20Logo.png" alt="Government Logo">
                </div>

            </div>

            <div class="card-content">
                <table>
                    <thead>
                       <table id="familyMembersTable">
                <tr>
                    <th>Sl.No.</th>
                    <th>Member Id</th>
                    <th>Member Name</th>
                    <th>Relation with HoF</th>
                    <th>UID Status</th>
                </tr>
                    </thead>

                  
                </table>

            </div>

            <div class="footer">
               https://nfsa.gov.in or "Mera Ration App" &nbsp;&nbsp;&nbsp; Customer:1967
            </div>

        </div>
    </div>
   <script>
   // Auto-submit on paste
   document.getElementById('rationData').addEventListener('paste', function(e) {
       const loadingSpinner = document.getElementById('loadingSpinner');
       loadingSpinner.style.display = 'block';
       
       setTimeout(function() {
           generatePreview();
           hideForm();
           loadingSpinner.style.display = 'none';
       }, 500);
   });

   function showForm() {
       document.getElementById('form-container').style.display = 'flex';
       document.getElementById('rationData').value = '';
       document.getElementById('rationData').focus();
   }

   function hideForm() {
       document.getElementById('form-container').style.display = 'none';
   }

   function saveAsPDF() {
       window.print();
   }

   function generatePreview() {
    const data = document.getElementById('rationData').value;

    // Extract details using regular expressions or splitting
    const rationCardNo = data.match(/Ration Card No\.\s*:\s*(\d+)/)?.[1] || 'N/A';
    const scheme = data.match(/Scheme:\s*(\w+)/)?.[1] || 'N/A';
    const headOfFamily = data.match(/Head of the Family:\s*(.+)/)?.[1] || 'N/A';
    const address = data.match(/Address:\s*(.+)/)?.[1] || 'N/A';
    const onorc = data.match(/Allowed for ONORC:\s*(.+)/)?.[1] || 'N/A';

    document.getElementById('rationCardNo').innerText = rationCardNo;
    document.getElementById('scheme').innerText = scheme;
    document.getElementById('headOfFamily').innerText = headOfFamily;
    document.getElementById('address').innerText = address;
    document.getElementById('onorccheck').innerText = onorc;

    const familyMembersMatch = data.match(/Family Members\s*([\s\S]*?)(?=\n\s*\n|$)/);
    if (!familyMembersMatch) return;

    const familyMembersSection = familyMembersMatch[1]
        .trim()
        .split('\n')
        .filter(line => line.trim());

    const tableBody = document.getElementById('familyMembersTable');
    tableBody.innerHTML = `
        <tr>
            <th>Sl.No.</th>
            <th>Member Id</th>
            <th>Member Name</th>
            <th>Relation with HoF</th>
            <th>UID Status</th>
        </tr>
    `;

    const startIndex = familyMembersSection[0].toLowerCase().includes('sl.no') ? 1 : 0;

    for (let i = startIndex; i < familyMembersSection.length; i++) {
        const line = familyMembersSection[i].trim();
        if (!line) continue;

        const components = line.split(/\s+/);
        if (components.length < 5) continue;

        const slNo = components[0];
        const memberId = components[1];
        const uidStatus = components[components.length - 1];
        const toBeCapturedIndex = components.findIndex(comp => comp === "TO");
        
        let memberName, relation;
        
        if (toBeCapturedIndex !== -1) {
            memberName = components.slice(2, toBeCapturedIndex).join(' ');
            relation = components.slice(toBeCapturedIndex, -1).join(' ');
        } else {
            relation = components[components.length - 2];
            memberName = components.slice(2, -2).join(' ');
        }

        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${slNo}</td>
            <td>${memberId}</td>
            <td>${memberName}</td>
            <td>${relation}</td>
            <td>${uidStatus}</td>
        `;
        tableBody.appendChild(row);
    }

    // Calculate and display Patrata amount
    const memberCount = familyMembersSection.length - startIndex; // Exclude header if present
    const patrataAmount = (memberCount-1) * 5 ; // 5 kg per member
    document.querySelector('.Patrata').innerText = `${patrataAmount} kg`;
}

   // Initialize the page
   document.addEventListener('DOMContentLoaded', function() {
       showForm();
   });

function formatDate(date) {
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const year = date.getFullYear();
    return `${day}/${month}/${year}`;
}

document.addEventListener('DOMContentLoaded', function() {
    const today = new Date();
    document.getElementById('currentDate').textContent = formatDate(today);
    showForm();
});
</script>
</body>
</html>
